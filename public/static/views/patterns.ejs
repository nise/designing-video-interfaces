<% layout( 'layout' ) -%>


<!-- Main component for a primary marketing message or call to action -->

  <!-- Main component for a primary marketing message or call to action -->
<div class="jumbotron">
	<div class="container">
  <h2  data-toggle="popover" title="eee" data-content="xxxx" data-placement="bottom" data-container="body">Video Interaction Design Patterns</h2>
  
  Find the right Patterns for your needs.
  </div>
</div>

<div class="container">
		<!-- Default panel contents  -->
		<div class="panel-body">  
			<div class="btn-group" role="group" aria-label="...">
				<a type="button" class="btn btn-default navbar-btn all-btn vp-filter">All</a>
				<a type="button" class="btn btn-default navbar-btn structure-btn vp-filter">Classification</a>
			<!--	<a type="button" class="btn btn-default navbar-btn network-btn vp-filter">Network</a>-->
				<a type="button" class="btn btn-default navbar-btn wizzard-btn vp-filter">Wizzard</a>
				<a type="button" class="btn btn-default navbar-btn playlist-btn vp-filter">Playlist</a>
			</div>
			
			<!-- Structure -->
			<div class="structure">
				Interactivity: <a href="#" id="struc1">Micro Level | Macro Level</a><br>
				Functionality: <a href="#" id="struc2">Playback | Annotations | Portal</a><br>
				Tasks: <a href="#" id="struc3">Watch | Time Access | Contribute | Self Organise | Layout</a><br><br>
				Status: <a href="#" id="struc4">Workshoped at *PLoP Conference | Not yet Workshoped | Proto-Patterns</a><br>
			</div>
			
			<!-- WIZZARD -->
			<ul class="list-group wizzard vp-overview">
				<li class="list-group-item">
					<input name="f1" id="switchOnText1"  class="wizzard-switch" type="checkbox" data-on-text="Yes" data-off-text="No" data-size="mini">
					Beinhaltet die Lernumgebung mehrere Medien (z.B. Videos, Bilder, Texte/Hypertexte)?
				</li>
			 	<li class="list-group-item">
					<input name="f2" id="switchOnText2"  class="wizzard-switch" type="checkbox" data-on-text="Yes" data-off-text="No" data-size="mini">
					Sind mehrere Videos in die Anwendung integriert?
				</li>
		 		<li class="list-group-item">
					<input name="f3" id="switchOnText3"  class="wizzard-switch" type="checkbox" data-on-text="Yes" data-off-text="No" data-size="mini">
					Stellen Sie weitere Medien synchron zum Video dar?
				</li>
		 		<li class="list-group-item">
					<input name="f4" id="switchOnText4"  class="wizzard-switch" type="checkbox" data-on-text="Yes" data-off-text="No" data-size="mini">
					Umfasst Ihre Zielgruppe Personen mit eingeschränkten visuellen, auditiven oder sprachlichen Fähigkeiten (z.B. Personen mit Sehschwäche, Schwerhörige oder Nicht-Muttersprachler)?
				</li>
		 		<li class="list-group-item">
					<input name="f5" id="switchOnText5"  class="wizzard-switch" type="checkbox" data-on-text="Yes" data-off-text="No" data-size="mini">
					Möchten Sie innerhalb der Videos oder zwischen Videos und anderen Lernressourcen Verknüpfungen herstellen?
				</li>
		 		<li class="list-group-item">
					<input name="f6" id="switchOnText6"  class="wizzard-switch" type="checkbox" data-on-text="Yes" data-off-text="No" data-size="mini">
					Ist mindestens ein Video länger als 10 Minuten?
				</li>
		 		<li class="list-group-item">
					<input name="f7" id="switchOnText7"  class="wizzard-switch" type="checkbox" data-on-text="Yes" data-off-text="No" data-size="mini">
					Besitzt mindestens ein Video eine hohe visuelle Dynamik oder viele visuelle Details?
				</li>
		 		<li class="list-group-item">
					<input name="f8" id="switchOnText8"  class="wizzard-switch" type="checkbox" data-on-text="Yes" data-off-text="No" data-size="mini">
					Ist die Menge an Lerninhalten unveränderlich oder prinzipiell durch die Lernenden erweiterbar?
				</li>
		 		<li class="list-group-item">
					<input name="f9" id="switchOnText9"  class="wizzard-switch" type="checkbox" data-on-text="Yes" data-off-text="No" data-size="mini">
					Sollen sich die Lernenden selbstständig mit den Lernressourcen auseinandersetzen?
				</li>
		 		<li class="list-group-item">
					<input name="f10" id="switchOnText10"  class="wizzard-switch" type="checkbox" data-on-text="Yes" data-off-text="No" data-size="mini">
					Beabsichtigen Sie die Schaffung eines Rückkanals für Kommentare oder Anmerkungen?
				</li>
		 		<li class="list-group-item">
					<input name="f11" id="switchOnText11"  class="wizzard-switch" type="checkbox" data-on-text="Yes" data-off-text="No" data-size="mini">
					Interagieren die Lernenden innerhalb der Anwendung miteinander oder bearbeiten sie eine gemeinsame Aufgabe?
				</li>
		 		<li class="list-group-item">
					<input name="f12" id="switchOnText12"  class="wizzard-switch" type="checkbox" data-on-text="Yes" data-off-text="No" data-size="mini">
					Gehen Sie davon aus, dass Ihre Zielgruppe vornehmlich mobile Endgeräte mit kleinem Display nutzt?
				</li>
			</ul>
		</div>
</div>


<!-- Pattern List -->
<div class="container patter-card-container-2col">
	
</div>
<div class="container patter-card-container">
<h3></h3>
<% i = 0 %>
<% items.forEach( function ( item ){ %>
	<% highlight = item.forces.length <= 20 ? 'highlight' : '' %>
	<% highlight = item.consequences.length <= 20 ? 'highlight' : highlight %>
	<% //highlight2 = item.related_patterns[0].type == undefined ? 'highlight' : '' %>
	<% tags = item.management.tags.join(' ')  
		tags += ' '+item.management.status

	%>
<% i++ %>
	<div class="col-md-2 col-xs-2  portfolio-item <%= tags %>" id="<%=: item.name | replace:/\ /g,'-' | downcase  %>">
		<div class="panel panel-default pattern-card <%= highlight %>" >
			<h5><a class="" href="/patterns/view/<%=: item.name | replace:/\ /g,'-' %>"><%= item.name %></a> 
				<a class="button" style="display:none;float:right;" href="/patterns/edit/<%= item._id %>" title="Update this item item"><span class="right glyphicon glyphicon-pencil" aria-hidden="true"></span></a>
			</h5>
			<% if (item.illustration != undefined) { %>
			<a class="" href="/patterns/edit/<%=: item.name | replace:/\ /g,'-' %>">
				<img class="card-image" src="<%= item.illustration %>" />
			</a>
			<% }%>
			<div onclick="javascript:addToFav('<%= item.name %>')" class="glyphicon glyphicon-plus add-fav" aria-hidden="true"></div>	
		</div>
	</div>	
<% }); %>	
</div>



<script>
$(document).ready (function () {  

	$('.vp-filter').click(function() {
		if( $(this).hasClass('all-btn') ){
			$('.portfolio-item').show();
			$('.network').hide( "slow" );
			$('.structure').hide( "slow" );
			$('.playlist').hide( "slow" );
			$('.wizzard').hide( "slow" );
		}else if( $(this).hasClass('wizzard-btn') ){
			$('.network').hide( "slow" );
			$('.structure').hide( "slow" );
			$('.playlist').hide( "slow" );
			$('.wizzard').toggle( "slow" );
		}else if( $(this).hasClass('network-btn') ){ 
			$('.wizzard').hide( "slow" );
			$('.structure').hide( "slow" );
			$('.playlist').hide( "slow" );
			$('.network').toggle( "slow" );
		}else if( $(this).hasClass('structure-btn') ){ 
			$('.network').hide( "slow" );
			$('.wizzard').hide( "slow" );
			$('.playlist').hide( "slow" );
			//applyStructur()
			$('.structure').toggle( "slow" );
		}else if( $(this).hasClass('playlist-btn') ){
			$('.network').hide( "slow" );
			$('.wizzard').hide( "slow" );
			$('.structure').hide( "slow" );
			fetchAll();
			$('.playlist').toggle( "slow" );
		}		
	});
	

	/* WIZZARD */
	//$(".wizzard-switch").bootstrapSwitch();
	var wizzard_checked = [];
	var decision_modell = {
		"f1" : ['Sequential Media'],
		"f2" : ['Branching Video', 'Detail on Demand', 'Hyperlinks', 'Journaled Navigation', 'Playlist', 'Related Videos', 'User Ratings', 'Viewing History', 'Visual Summary'],
		"f3" : ['Full Screen', 'Simultaneous Media', 'Synchronizes Map', ],
		"f4" : ['Closed Captions', 'Transcript'],
		"f5" : ['Annotated Timeline', 'Branching Videos', 'Detail on Demand', 'Hyperlinks', 'Journaled Navigation', 'Temporal Tags'],
		"f6" : ['Table of Content', 'Temporal Tags', 'Visual Summary', ],
		"f7" : ['Loop', 'Object Tracking', 'Playback Speed', 'Skip Back', 'Visual Highlighting', 'Zoom'],
		"f8" : ['Add Video', 'Annotations', 'Comments', 'Direct Authoring', 'Follow Revisions', 'Media Fragments', 'Object Tracking', 'Remix', 'User Notes', 'Video Manipulation'],
		"f9" : ['Assessment', 'Playlist', 'Related Videos', 'Search','Table of Content', 'Temporal Bookmarks', 'User Notes', 'User Traces', 'Viewing History'],
		"f10" : ['Annotations', 'Assessment', 'Comments', 'User Ratings'],
		"f11" : ['Comments', 'User Ratings', 'User Traces'],
		"f12" : ['Annotated Timeline', 'Classified Marks', 'Multi-Timeline Editing', 'Overlays', 'Remix', 'Simultaneous Media', 'Synchronized Maps', 'User Traces', 'Video Manipulation']
	};
	
	$("input.wizzard-switch").on('change', function (e, state) { 
		wizzard_checked = [];
		$("input").each(function(i, val){ 
			if($(val).prop('checked') ){ 
				wizzard_checked = wizzard_checked.concat( decision_modell[ $(val).attr('name') ] )
			}
		});
		showPatterns();
	});
	

	function showPatterns(){ 
		// hide all
		$('.portfolio-item').hide();
		// show selected
		for(var i = 0; i < wizzard_checked.length; i++){
			$( '#'+wizzard_checked[i].replace(/\ /g,'-').toLowerCase() ).show();	
		}
	}
	
	$('.vp-overview').hide();
	
	
	
	
	
	/* CLASSIFICATION */
	$('#struc1').click(function(){ splitContainer(['micro','macro']); });
	$('#struc2').click(function(){ splitContainer(['player','annotation','portal']); });
	$('#struc3').click(function(){ splitContainer(['basic','timeaccess','structure','contribution','selforga','layout']); });
	$('#struc4').click(function(){ splitContainer(['workshoped-pattern','pattern','proto-pattern']); });
		
	var structure_data = {
		micro : {
			title:'Micro Level',
			description:'some...'
		},
		macro : {
			title:'Macro Level',
			description:'some...'
		},
		player : {
			title:'Playback',
			description:'some...'
		},
		annotation : {
			title:'Annotations',
			description:'some...'
		},
		portal : {
			title:'Portal',
			description:'some...'
		},
		basic : {
			title:'Basic',
			description:'some...'
		},
		layout : {
			title:'Layout',
			description:'some...'
		},
		timeaccess : {
			title:'Time Access',
			description:'some...'
		},
		structure : {
			title:'Structur',
			description:'some...'
		},
		selforga : {
			title:'Self Organisation',
			description:'some...'
		},
		contribution : {
			title:'Contribution',
			description:'some...'
		},
		workshopedpattern : {
			title:'Workshoped Pattern',
			description:'some...'
		},
		pattern : {
			title:'Pattern',
			description:'some...'
		},
		protopattern : {
			title:'Proto-Pattern',
			description:'some...'
		}
	}
	
	function splitContainer(con){
		// reset
		$('.patter-card-container h3').text('');
		$('.patter-card-container-2col .portfolio-item').each(function(i, val){
			$('.patter-card-container').append( $(this) );
		});
		$('.patter-card-container-2col').empty();
		//
		var size = 12;//12 / con.length;
		
		for(var i = 0; i < con.length; i++){
			var container = [
				'<div id="container'+i+'" class="col-md-'+size+' col-xs-'+size+'">',
				'<h3>'+ structure_data[ con[i].replace('-','') ].title +'</h3>',
				'<div>'+ structure_data[ con[i].replace('-','') ].description +'</div>',
				'<div class="patterns"></div>',
				'</div>'
			];
			$('.patter-card-container-2col').append( container.join('') );
			// fill container
			$('.portfolio-item.'+con[i] ).each(function(j, val){	 
				$('#container'+i+' .patterns').append( $(this) );
			});
		}// end for
		
		// other patters
		if($('.patter-card-container .portfolio-item').length > 0){
			$('.patter-card-container')
				.css({'border-top':'solid 4px #ccc'})
				.find('h3').text('Others');
				;
		}		
	}
	

});	// end document ready
</script>

